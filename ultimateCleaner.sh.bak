#!/bin/bash

# COLORS DEFINITION
BLACK="\e[30m"          # black
RED="\e[31m"            # red
PINK="\e[91m"           # pink (actually light_red)
GREEN="\e[92m"          # green (actually light_green)
DARK_GREEN="\e[32m"     # green
YELLOW="\e[33m"         # yellow
LIGHT_YELLOW="\e[93m"   # light_yellow
BLUE="\e[94m"           # blue
DARK_BLUE="\e[34m"      # blue (actually dark_blue)
MAGENTA="\e[95m"        # magenta (actually light_magenta)
DARK_MAGENTA="\e[35m"   # magenta
CYAN="\e[96m"           # cyan (actually light_cyan)
DARK_CYAN="\e[36m"      # cyan
LIGHT_GREY="\e[37m"     # light grey
DARK_GREY="\e[90m"      # dark grey
WHITE="\e[97m"          # white
COLOR_OFF="\e[39m"      # Clean the color, return to default


clear

echo -e $YELLOW"  #############################"$COLOR_OFF
echo -e $YELLOW"  ## ULTIMATE CLEANER SCRIPT ##"$COLOR_OFF
echo -e $YELLOW"  #############################"$COLOR_OFF

echo "[0] Récupération des paramètres..."
if [ $# != 0 ] && [ $1 != "" ] && [ -d $1 ]
then
    WORKING_DIR=`readlink -f "$1"`
else
    echo -e "$RED Aucun arguments ! Il me faut le chemin du dossier à trier\e[39m"
    exit 1
fi

CLEAN_DIR="$WORKING_DIR"/../CLEAN


echo "[1] Création du dossier de destination..."

rm -rf $CLEAN_DIR
sleep 5
mkdir -p $CLEAN_DIR/Photos
sleep 5
mkdir -p $CLEAN_DIR/Vidéos
sleep 5
mkdir -p $CLEAN_DIR/Documents
sleep 5
mkdir -p $CLEAN_DIR/Audio
sleep 5
mkdir -p $CLEAN_DIR/Inclassables

echo "[2] Récupération des fichiers..."
files=`find $WORKING_DIR -type f`
sleep 5


echo "[3] Trie en cours..."
find $WORKING_DIR -type f | while [[ read FILE ]]; do
    echo a
    sleep 1
done
# for f in $files
# do
#     echo $NB"$f"
#     if file $f | grep -q 'image data'
#     then
#         echo "img"
#         #cp $f $CLEAN_DIR/Photos
#     elif file $f | grep -q 'PDF'
#     then
#         echo "doc"
#         #cp $f $CLEAN_DIR/Documents
#     elif file $f | grep -q 'MPEG'
#     then
#         echo "audio"
#         #cp $f $CLEAN_DIR/Audio
#     elif file $f | grep -q 'AVI'
#     then
#         echo "video"
#         #cp $f $CLEAN_DIR/Vidéo
#     else
#         echo "autre"
#         #cp $f $CLEAN_DIR/Inclassables
#     fi
#     ((NB++))
# done
echo "[FIN] Tri terminé"
exit 0
